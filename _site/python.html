<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Using Python with IBM COS | IBM COS Documentation</title>
<link rel="stylesheet" href="css/syntax.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.png">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:8081feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 125,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg fa-home navbar-brand" href="index.html"><span class="projectTitle"> IBM Cloud Object Storage Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">IBM Bluemix<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://bluemix.com" target="_blank">About IBM Bluemix</a></li>
                        
                        
                        
                        <li><a href="https://console.ng.bluemix.net/catalog/" target="_blank">Bluemix catalog</a></li>
                        
                        
                        
                        <li><a href="https://console.ng.bluemix.net/docs/" target="_blank">Bluemix documentation</a></li>
                        
                        
                        
                        <li><a href="https://www.ibm.com/cloud-computing/products/storage/object-storage/" target="_blank">IBM Cloud Object Storage</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="index.html">IBM COS Standard Cross-Region (S3 API)</a></li>
                        
                        
                        
                        <li><a href="http://sldn.softlayer.com/reference/objectstorageapi" target="_blank">IBM COS Standard Regional (Swift API)</a></li>
                        
                        
                        
                        <li><a href="https://console.ng.bluemix.net/docs/services/ObjectStorage/index.html" target="_blank">Object Storage for Bluemix</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://developer.ibm.com/answers/smartspace/public-cloud-object-storage/" target="_blank">IBM devWorks</a></li>
                        
                        
                        
                        <li><a href="https://stackoverflow.com/questions/tagged/object-storage+softlayer/" target="_blank">StackOverflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Using Python with IBM COS">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          









<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">GETTING STARTED</a>
        <ul>
            
            
            
            <li><a href="index.html">About IBM Cloud Object Storage</a></li>
            
            
            
            
            
            
            <li><a href="getting-started-with-cos">Quickstart guide</a></li>
            
            
            
            
            
            
            <li><a href="ordering-storage">Ordering storage</a></li>
            
            
            
            
            
            
            <li><a href="storing-and-retrieving-objects">Storing and retrieving objects</a></li>
            
            
            
            
            
            
            <li><a href="using-the-api">Using the APIs</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">API REFERENCE</a>
        <ul>
            
            
            
            <li><a href="about-compatibility-api">About the Compatibility API (S3)</a></li>
            
            
            
            
            
            
            <li><a href="api-reference">Compatibility API (S3) reference</a></li>
            
            
            
            
            
            
            <li><a href="using-slapi">Using the SoftLayer API</a></li>
            
            
            
            
            
            
            <li><a href="cli">Using command line interfaces</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Libraries & SDKs</a>
                <ul>
                    
                    
                    
                    <li class="active"><a href="python">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="java">Java</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">HOW TO</a>
        <ul>
            
            
            
            <li><a href="endpoints">Select endpoints</a></li>
            
            
            
            
            
            
            <li><a href="manage-access">Manage access</a></li>
            
            
            
            
            
            
            <li><a href="storage-classes">Use storage classes</a></li>
            
            
            
            
            
            
            <li><a href="desktop-clients">Use desktop clients</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">HELP</a>
        <ul>
            
            
            
            <li><a href="object-storage">About object storage</a></li>
            
            
            
            
            
            
            <li><a href="security">Data security</a></li>
            
            
            
            
            
            
            <li><a href="developer-guidance">Developer guidance</a></li>
            
            
            
            
            
            
            <li><a href="faq">FAQ</a></li>
            
            
            
            
            
            
            <li><a href="support">Support</a></li>
            
            
            
            
            
            
            <li><a href="billing">Billing</a></li>
            
            
            
            
            
            
            <li><a href="https://www.ibm.com/cloud-computing/products/storage/object-storage/public-service/#othertab2" target="_blank">Pricing</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block: -->
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Using Python with IBM COS</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

  <p>Python support is provided through the Boto 3 library.  It can be installed from the Python Package Index via <code class="highlighter-rouge">pip install boto3</code>. The examples shown here were generated using version 1.4.0 of the boto3 package.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Existing applications that use the original Boto 2.x library should be compatible as well, although it is no longer being actively maintained and users are encouraged to migrate to Boto 3. </div>

<p>By default, access keys are sourced from <code class="highlighter-rouge">~/.aws/credentials</code>, but can also be set as environment variables. Minimum required <code class="highlighter-rouge">~/.aws/credentials</code> file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[default]
aws_access_key_id = {Access Key ID}
aws_secret_access_key = {Secret Access Key}
</code></pre>
</div>

<p>The <code class="highlighter-rouge">boto3</code> library provides complete access to the S3 API and can source credentials from the <code class="highlighter-rouge">~/.aws/credentials</code> file referenced above.  The IBM COS endpoint must be specified when creating a service resource or low-level client as shown in the following basic examples.</p>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> Detailed documentation can be found at <a href="https://boto3.readthedocs.io/en/latest/reference/services/s3.html">boto3.readthedocs.io</a>.</div>

<h3 id="example-service-resource-script">Example service resource script</h3>

<p>Creating a service resource provides greater abstraction for higher level tasks.  This is a basic script that fetches the list of buckets owned by an account, and lists the objects in each bucket.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">boto3</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://s3-api.us-geo.objectstorage.softlayer.net'</span>

<span class="n">cos</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s">'s3'</span><span class="p">,</span> <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint</span><span class="p">)</span>

<span class="k">for</span> <span class="n">bucket</span> <span class="ow">in</span> <span class="n">cos</span><span class="o">.</span><span class="n">buckets</span><span class="o">.</span><span class="nb">all</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">bucket</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">bucket</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"  - </span><span class="si">%</span><span class="s">s"</span><span class="p">)</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">key</span>
</code></pre>
</div>

<h5 id="example-script-response">Example script response</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>bucket-1
  - c1ca2-filename-00001
  - c9872-filename-00002
  - 98837-filename-00003
  - abfc4-filename-00004
bucket-2
  - c1ca2-filename-00011
</code></pre>
</div>

<h3 id="example-low-level-client-script">Example low-level client script</h3>

<p>Creating a low-level client allows for considerably more detail and access to metadata. This is a basic script that fetches the list of buckets owned by an account, and lists objects in each bucket. As considerably more data is returned than in the previous example, the <code class="highlighter-rouge">pprintpp</code> package is used to increase the readability of the raw output.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">boto3</span>
<span class="kn">import</span> <span class="nn">pprint</span> <span class="kn">as</span> <span class="nn">pp</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://s3-api.us-geo.objectstorage.softlayer.net'</span>

<span class="n">cos</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s">'s3'</span><span class="p">,</span> <span class="n">endpoint_url</span><span class="o">=</span><span class="n">endpoint</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'These are the buckets in this service account:'</span><span class="p">)</span>
<span class="n">buckets</span> <span class="o">=</span> <span class="n">cos</span><span class="o">.</span><span class="n">list_buckets</span><span class="p">()</span>
<span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">buckets</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">180</span><span class="p">)</span>

<span class="k">for</span> <span class="n">bucket</span> <span class="ow">in</span> <span class="n">buckets</span><span class="p">[</span><span class="s">'Buckets'</span><span class="p">]:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">[</span><span class="s">'Name'</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Raw output from 'list_buckets()' in </span><span class="si">%</span><span class="s">s:"</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">cos</span><span class="o">.</span><span class="n">list_objects</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
</code></pre>
</div>

<h5 id="example-script-response-1">Example script response</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>These are the buckets in this service account:
{
    u'Buckets': [
        {u'CreationDate': datetime.datetime(1970, 1, 1, 0, 0, tzinfo=tzutc()), u'Name': 'bucket-1'},
        {u'CreationDate': datetime.datetime(2016, 9, 16, 21, 29, 0, 912000, tzinfo=tzutc()), u'Name': 'bucket-2'},
    ],
    u'Owner': {u'DisplayName': '{storage-account-uuid}', u'ID': '{storage-account-uuid}'},
    'ResponseMetadata': {
        'HTTPHeaders': {
            'accept-ranges': 'bytes',
            'content-length': '463',
            'content-type': 'application/xml',
            'date': 'Wed, 12 Oct 2016 13:53:27 GMT',
            'server': 'Cleversafe/3.9.0.129',
            'x-amz-request-id': '0a7a3f3b-d788-45c6-a16d-9025031e43cb',
            'x-clv-request-id': '0a7a3f3b-d788-45c6-a16d-9025031e43cb',
            'x-clv-s3-version': '2.5',
        },
        'HTTPStatusCode': 200,
        'HostId': '',
        'RequestId': '0a7a3f3b-d788-45c6-a16d-9025031e43cb',
        'RetryAttempts': 0,
    },
}
Raw output from 'list_buckets()' in apiary:
{
    u'Contents': [
        {
            u'ETag': '"2bcc8ee6bc1e4b8cd2f9a1d61d817ed2"',
            u'Key': 'c1ca2-filename-00001',
            u'LastModified': datetime.datetime(2016, 10, 6, 14, 44, 37, 211000, tzinfo=tzutc()),
            u'Owner': {
                u'DisplayName': '{storage-account-uuid}',
                u'ID': '{storage-account-uuid}',
            },
            u'Size': 20950,
            u'StorageClass': 'STANDARD',
        },
        {
            u'ETag': '"3ca744fa96cb95e92081708887f63de5"',
            u'Key': 'c9872-filename-00002',
            u'LastModified': datetime.datetime(2016, 10, 11, 13, 12, 32, 234000, tzinfo=tzutc()),
            u'Owner': {
                u'DisplayName': '{storage-account-uuid}',
                u'ID': '{storage-account-uuid}',
            },
            u'Size': 533,
            u'StorageClass': 'STANDARD',
        },
        {
            u'ETag': '"ed5204ca0be62274dcd4dca3a37ae606"',
            u'Key': '98837-filename-00003',
            u'LastModified': datetime.datetime(2016, 10, 6, 15, 11, 49, 20000, tzinfo=tzutc()),
            u'Owner': {
                u'DisplayName': '{storage-account-uuid}',
                u'ID': '{storage-account-uuid}',
            },
            u'Size': 1989,
            u'StorageClass': 'STANDARD',
        },
        {
            u'ETag': '"13d567d518c650414c50a81805fff7f2"',
            u'Key': 'abfc4-filename-00004',
            u'LastModified': datetime.datetime(2016, 9, 28, 15, 36, 56, 807000, tzinfo=tzutc()),
            u'Owner': {
                u'DisplayName': '{storage-account-uuid}',
                u'ID': '{storage-account-uuid}',
            },
            u'Size': 837,
            u'StorageClass': 'STANDARD',
        },
    ],
    u'Delimiter': '',
    u'IsTruncated': False,
    u'Marker': '',
    u'MaxKeys': 1000,
    u'Name': 'bucket-1',
    u'Prefix': '',
    'ResponseMetadata': {
        'HTTPHeaders': {
            'accept-ranges': 'bytes',
            'content-length': '2492',
            'content-type': 'application/xml',
            'date': 'Wed, 12 Oct 2016 13:53:27 GMT',
            'server': 'Cleversafe/3.9.0.129',
            'x-amz-request-id': 'bb6984e9-68bf-4419-be98-1af0dbc782f9',
            'x-clv-request-id': 'bb6984e9-68bf-4419-be98-1af0dbc782f9',
            'x-clv-s3-version': '2.5',
        },
        'HTTPStatusCode': 200,
        'HostId': '',
        'RequestId': 'bb6984e9-68bf-4419-be98-1af0dbc782f9',
        'RetryAttempts': 0,
    },
}
Raw output from 'list_buckets()' in bucket-2:
{
    u'Contents': [
        {
            u'ETag': '"88bfd87922eb17cff5b791c4d3fee1e4"',
            u'Key': 'c1ca2-filename-00011',
            u'LastModified': datetime.datetime(2016, 9, 17, 18, 11, 58, 811000, tzinfo=tzutc()),
            u'Owner': {
                u'DisplayName': '{storage-account-uuid}',
                u'ID': '{storage-account-uuid}',
            },
            u'Size': 112001,
            u'StorageClass': 'STANDARD',
        },
    ],
    u'Delimiter': '',
    u'IsTruncated': False,
    u'Marker': '',
    u'MaxKeys': 1000,
    u'Name': 'bucket-2',
    u'Prefix': '',
    'ResponseMetadata': {
        'HTTPHeaders': {
            'accept-ranges': 'bytes',
            'content-length': '905',
            'content-type': 'application/xml',
            'date': 'Wed, 12 Oct 2016 13:53:27 GMT',
            'server': 'Cleversafe/3.9.0.129',
            'x-amz-request-id': 'ac14085f-2e96-4c5a-b276-de98edb32e30',
            'x-clv-request-id': 'ac14085f-2e96-4c5a-b276-de98edb32e30',
            'x-clv-s3-version': '2.5',
        },
        'HTTPStatusCode': 200,
        'HostId': '',
        'RequestId': 'ac14085f-2e96-4c5a-b276-de98edb32e30',
        'RetryAttempts': 0,
    },
}
</code></pre>
</div>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 IBM. <a href="/crs-docs/notices.html">Notices.</a> All rights reserved. <br />
<span>Page last updated:</span> November 18, 2016<br/> Site last generated: May 5, 2017 <br /><br />
<p> &nbsp; <img src="images/cos_logo.svg" alt="Company logo" style="width:100px;"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>